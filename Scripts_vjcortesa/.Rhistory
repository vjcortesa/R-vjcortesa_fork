gameversion <- read_csv(paste0(script_dir, "\\",folder_name, "\\", "gameversion.csv"))
# gameversion <- read_csv(paste0(script_dir, "\\",folder_name, "\\", "gameversion.csv"))
# gamesession <- read_csv(paste0(script_dir, "\\",folder_name, "\\", "gamesession.csv"))
# group <- read_csv(paste0(script_dir, "\\",folder_name, "\\", "group.csv"))
# groupround <- read_csv(paste0(script_dir, "\\",folder_name, "\\", "groupround.csv"))
# playerround <- read_csv(paste0(script_dir, "\\",folder_name, "\\", "playerround.csv"))
# welfaretype <- read_csv(paste0(script_dir, "\\",folder_name, "\\", "welfaretype.csv"))
# scenario <- read_csv(paste0(script_dir, "\\",folder_name, "\\", "scenario.csv"))
# player <- read_csv(paste0(script_dir, "\\",folder_name, "\\", "player.csv"))
# housemeasure <- read_csv(paste0(script_dir, "\\",folder_name, "\\", "housemeasure.csv"))
# housegroup <- read_csv(paste0(script_dir, "\\",folder_name, "\\", "housegroup.csv"))
# measuretype <- read_csv(paste0(script_dir, "\\",folder_name, "\\", "measuretype.csv"))
# personalmeasure <- read_csv(paste0(script_dir, "\\",folder_name, "\\", "personalmeasure.csv"))
#
# # # 2. Add the variables to plot per session, group and player ------------
# # Add the session name variable remaned to avoid name overlap with the group name variable
# gamesession <- gamesession %>% rename(gamesession_name = name)
#
# # Add to group the gamesession_name
# # Merge the gamesession selection into the group by the group = gamesession id
# # Inner_join keeps only the rows that have matching values in both data frames
# group <- group %>%
#   inner_join(gamesession %>% select(id, gamesession_name), by = c("gamesession_id" = "id"))
#
# # Add to groupround the group_name and gamesession_name
# ## Merge the group selection into the groupround by the groupround = group id
# groupround <- groupround %>%
#   inner_join(group %>% select(id, name, gamesession_id, gamesession_name, scenario_id), by = c("group_id" = "id"))
# ## Rename name variable in groupround for variable naming consistency
# groupround <- groupround %>% rename(group_name = name)
#
# ## Add to playerround the groupround selection to filter per round, group and session id and names by playerround = groupround id
# playerround <- playerround %>%
#   inner_join(groupround %>% select(id, round_number, group_id, group_name, gamesession_id, gamesession_name, scenario_id), by = c("groupround_id" = "id"))
#
# ## Add to playerround the player code to filter datasets per player by playerround = player id
# playerround <- playerround %>%
#   inner_join(player %>% select(id, code), by = c("player_id" = "id"))
rstudioapi::isAvailable()
gameversion <- read_csv(paste0(script_dir, "\\",folder_name, "\\", "gameversion.csv"))
gameversion <- read_csv(paste0(script_dir, "\\",folder_name, "\\", "gameversion.csv"))
gameversion <- read_csv(paste0(script_dir, "\\",folder_name, "\\", "gameversion.csv"))
# Load necessary libraries
library(readxl)
library(readr)
# Load if using RStudio (interactive session)
library(rstudioapi)
library(sqldf)
# # 1. Read the database folder to create accordingly the dataframes -----------
# Get the path of the current script (works in RStudio)
folder_name <- "housinggame_session_20_251007_VerzekeraarsMasterClass"
script_path <- rstudioapi::getActiveDocumentContext()$path
script_dir <- dirname(script_path)
gameversion <- read_csv(paste0(script_dir, "\\",folder_name, "\\", "gameversion.csv"))
# gameversion <- read_csv(paste0(script_dir, "\\",folder_name, "\\", "gameversion.csv"))
# gamesession <- read_csv(paste0(script_dir, "\\",folder_name, "\\", "gamesession.csv"))
# group <- read_csv(paste0(script_dir, "\\",folder_name, "\\", "group.csv"))
# groupround <- read_csv(paste0(script_dir, "\\",folder_name, "\\", "groupround.csv"))
# playerround <- read_csv(paste0(script_dir, "\\",folder_name, "\\", "playerround.csv"))
# welfaretype <- read_csv(paste0(script_dir, "\\",folder_name, "\\", "welfaretype.csv"))
# scenario <- read_csv(paste0(script_dir, "\\",folder_name, "\\", "scenario.csv"))
# player <- read_csv(paste0(script_dir, "\\",folder_name, "\\", "player.csv"))
# housemeasure <- read_csv(paste0(script_dir, "\\",folder_name, "\\", "housemeasure.csv"))
# housegroup <- read_csv(paste0(script_dir, "\\",folder_name, "\\", "housegroup.csv"))
# measuretype <- read_csv(paste0(script_dir, "\\",folder_name, "\\", "measuretype.csv"))
# personalmeasure <- read_csv(paste0(script_dir, "\\",folder_name, "\\", "personalmeasure.csv"))
#
# # # 2. Add the variables to plot per session, group and player ------------
# # Add the session name variable remaned to avoid name overlap with the group name variable
# gamesession <- gamesession %>% rename(gamesession_name = name)
#
# # Add to group the gamesession_name
# # Merge the gamesession selection into the group by the group = gamesession id
# # Inner_join keeps only the rows that have matching values in both data frames
# group <- group %>%
#   inner_join(gamesession %>% select(id, gamesession_name), by = c("gamesession_id" = "id"))
#
# # Add to groupround the group_name and gamesession_name
# ## Merge the group selection into the groupround by the groupround = group id
# groupround <- groupround %>%
#   inner_join(group %>% select(id, name, gamesession_id, gamesession_name, scenario_id), by = c("group_id" = "id"))
# ## Rename name variable in groupround for variable naming consistency
# groupround <- groupround %>% rename(group_name = name)
#
# ## Add to playerround the groupround selection to filter per round, group and session id and names by playerround = groupround id
# playerround <- playerround %>%
#   inner_join(groupround %>% select(id, round_number, group_id, group_name, gamesession_id, gamesession_name, scenario_id), by = c("groupround_id" = "id"))
#
# ## Add to playerround the player code to filter datasets per player by playerround = player id
# playerround <- playerround %>%
#   inner_join(player %>% select(id, code), by = c("player_id" = "id"))
View(gameversion)
View(gameversion)
("SELECT name FROM gameversion WHERE id = 13")
# Load necessary libraries
library(readxl)
library(readr)
# Load if using RStudio (interactive session)
library(rstudioapi)
library(sqldf)
# # 1. Read the database folder to create accordingly the dataframes -----------
# Get the path of the current script (works in RStudio)
folder_name <- "housinggame_session_20_251007_VerzekeraarsMasterClass"
script_path <- rstudioapi::getActiveDocumentContext()$path
script_dir <- dirname(script_path)
gameversion <- read_csv(paste0(script_dir, "\\",folder_name, "\\", "gameversion.csv"))
result <- sqldf("SELECT name FROM gameversion WHERE id = 13")
# Load necessary libraries
library(readxl)
library(readr)
# Load if using RStudio (interactive session)
library(rstudioapi)
library(sqldf)
# # 1. Read the database folder to create accordingly the dataframes -----------
# Get the path of the current script (works in RStudio)
folder_name <- "housinggame_session_20_251007_VerzekeraarsMasterClass"
script_path <- rstudioapi::getActiveDocumentContext()$path
script_dir <- dirname(script_path)
gameversion <- read_csv(paste0(script_dir, "\\",folder_name, "\\", "gameversion.csv"))
result <- sqldf("SELECT name FROM gameversion WHERE id = 13")
View(result)
View(result)
# # 1. Read the database folder to create accordingly the dataframes -----------
# Get the path of the current script (works in RStudio)
folder_name <- "housinggame_session_20_251007_VerzekeraarsMasterClass"
script_path <- rstudioapi::getActiveDocumentContext()$path
script_dir <- dirname(script_path)
# Set folder path dynamically
folder_path <- paste0(script_dir, "\\",folder_name)
# Load necessary libraries
library(readxl)
library(readr)
# Load if using RStudio (interactive session)
library(rstudioapi)
library(sqldf)
# # 1. Read the database folder to create accordingly the dataframes -----------
# Get the path of the current script (works in RStudio)
folder_name <- "housinggame_session_20_251007_VerzekeraarsMasterClass"
script_path <- rstudioapi::getActiveDocumentContext()$path
script_dir <- dirname(script_path)
# Set folder path dynamically
folder_path <- paste0(script_dir, "\\",folder_name)
print(folder_path)
folder_name <- "housinggame_session_20_251007_VerzekeraarsMasterClass"
script_path <- rstudioapi::getActiveDocumentContext()$path
script_dir <- dirname(script_path)
# Set folder path dynamically
folder_path <- paste0(script_dir, "\\",folder_name)
# List all CSV files in the folder
csv_data_list <- lapply(csv_files, read_csv)
folder_name <- "housinggame_session_20_251007_VerzekeraarsMasterClass"
script_path <- rstudioapi::getActiveDocumentContext()$path
script_dir <- dirname(script_path)
# Set folder path dynamically
folder_path <- paste0(script_dir, "\\",folder_name)
# List all CSV files in the folder
csv_data_list <- lapply(csv_files, read_csv)
# Load necessary libraries
library(readxl)
library(readr)
# Load if using RStudio (interactive session)
library(rstudioapi)
library(sqldf)
# # 1. Read the database folder to create accordingly the dataframes -----------
# Get the path of the current script (works in RStudio)
folder_name <- "housinggame_session_20_251007_VerzekeraarsMasterClass"
script_path <- rstudioapi::getActiveDocumentContext()$path
script_dir <- dirname(script_path)
# Set folder path dynamically
folder_path <- paste0(script_dir, "\\",folder_name)
# List all CSV files in the folder
csv_files <- list.files(path = folder_path, pattern = "\\.csv$", full.names = TRUE)
# List all CSV files in the folder
csv_data_list <- lapply(csv_files, read_csv)
# Optionally, name each list element by its file name (without extension)
names(csv_data_list) <- tools::file_path_sans_ext(basename(csv_files))
# Load necessary libraries
library(readxl)
library(readr)
# Load if using RStudio (interactive session)
library(rstudioapi)
library(sqldf)
# # 1. Read the database folder to create accordingly the dataframes -----------
# Get the path of the current script (works in RStudio)
folder_name <- "housinggame_session_20_251007_VerzekeraarsMasterClass"
script_path <- rstudioapi::getActiveDocumentContext()$path
script_dir <- dirname(script_path)
# Set folder path dynamically
folder_path <- paste0(script_dir, "\\",folder_name)
# List all CSV files in the folder
csv_files <- list.files(path = folder_path, pattern = "\\.csv$", full.names = TRUE)
# List all CSV files in the folder
csv_data_list <- lapply(csv_files, read_csv)
# Optionally, name each list element by its file name (without extension)
names(csv_data_list) <- tools::file_path_sans_ext(basename(csv_files))
# Load necessary libraries
library(readxl)
library(readr)
# Load if using RStudio (interactive session)
library(rstudioapi)
library(sqldf)
# # 1. Read the database folder to create accordingly the dataframes -----------
# Get the path of the current script (works in RStudio)
folder_name <- "housinggame_session_20_251007_VerzekeraarsMasterClass"
script_path <- rstudioapi::getActiveDocumentContext()$path
script_dir <- dirname(script_path)
# Set folder path dynamically
folder_path <- paste0(script_dir, "\\",folder_name)
# List all CSV files in the folder
csv_files <- list.files(path = folder_path, pattern = "\\.csv$", full.names = TRUE)
# List all CSV files in the folder
csv_data_list <- lapply(csv_files, read_csv)
# Optionally, name each list element by its file name (without extension)
names(csv_data_list) <- tools::file_path_sans_ext(basename(csv_files))
# Load necessary libraries
library(readxl)
library(readr)
# Load if using RStudio (interactive session)
library(rstudioapi)
library(sqldf)
# Get the path of the current script (works in RStudio)
folder_name <- "housinggame_session_20_251007_VerzekeraarsMasterClass"
script_path <- rstudioapi::getActiveDocumentContext()$path
script_dir <- dirname(script_path)
# Set folder path dynamically
folder_path <- paste0(script_dir, "\\",folder_name)
# List all CSV files in the folder
csv_files <- list.files(path = folder_path, pattern = "\\.csv$", full.names = TRUE)
# Read all CSVs into a list
csv_data_list <- lapply(csv_files, read_csv)
# Optionally, name each list element by its file name (without extension)
names(csv_data_list) <- tools::file_path_sans_ext(basename(csv_files))
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/functions/Read_dataset_files.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/functions/Read_dataset_files.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/functions/Read_dataset_files.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/functions/Read_dataset_files.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/functions/Read_dataset_files.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/functions/Read_dataset_files.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/functions/Read_dataset_files.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/functions/Read_dataset_files.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/functions/Read_dataset_files.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/functions/Read_dataset_files.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/functions/Read_dataset_files.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/functions/Read_dataset_files.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/functions/Read_dataset_files.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/functions/Read_dataset_files.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/functions/Read_dataset_files.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/functions/Read_dataset_files.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/functions/Read_dataset_files.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/functions/Read_dataset_files.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/WWM_How did players spend their money_vjcortesa.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/WWM_How did players spend their money_vjcortesa.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/WWM_How did players spend their money_vjcortesa.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/WWM_How did players spend their money_vjcortesa.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/WWM_How did players spend their money_vjcortesa.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/WWM_How did players spend their money_vjcortesa.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/WWM_How did players spend their money_vjcortesa.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/WWM_How did players spend their money_vjcortesa.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/WWM_How did players spend their money_vjcortesa.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/WWM_How did players spend their money_vjcortesa.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/WWM_How did players spend their money_vjcortesa.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/WWM_How did players spend their money_vjcortesa.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/WWM_How did players spend their money_vjcortesa.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/WWM_How did players spend their money_vjcortesa.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/WWM_How did players spend their money_vjcortesa.R")
source('~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/WWM_How did players spend their money_vjcortesa.R')
source('~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/WWM_How did players spend their money_vjcortesa.R')
source('~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/WWM_How did players spend their money_vjcortesa.R')
source('~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/WWM_How did players spend their money_vjcortesa.R')
source('~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/WWM_How did players spend their money_vjcortesa.R')
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/functions/Read_dataset_files_function_vjcortesa.R")
View(read_all_csvs)
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/WWM_How did players spend their money_vjcortesa.R")
View(read_all_csvs)
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/functions/Read_dataset_files_function_vjcortesa.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/functions/Read_dataset_files.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/WWM_How did players spend their money_vjcortesa.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/WWM_How did players spend their money_vjcortesa.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis_24 dataset/250814_Ommen session_240924.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis_24 dataset/250814_Ommen session_240924.R")
# Load necessary libraries
library(readxl)
source("~/TUDelft/18_Notebooks_071125/R data analysis_24 dataset/250814_Ommen session_240924.R")
source("~/TUDelft/18_Notebooks_071125/R data analysis_24 dataset/250814_Ommen session_240924.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/functions/vjcortesa_RiskPerception_DS_function.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/GS4_vjcortesa_How is risk perception assessed_risk profiles.R")
# Get the path of the current script (works in RStudio)
# e.g. "~/R data analysis BEPs/Scripts_vjcortesa/functions/vjcortesa_RiskPerception_DataSettings.R"
script_path <- rstudioapi::getActiveDocumentContext()$path
# e.g. "~/R data analysis BEPs/Scripts_vjcortesa/functions/"
scriptfolder_path <- dirname(script_path)
print(scriptfolder_path)
datasetfolder_path <- paste0(dirname(scriptfolder_path),"/Datasets/")
print(datasetfolder_path)
source(file.path(scriptfolder_path, "functions", "vjcortesa_RiskPerception_DS_function.R"))
# Set paths to datasets
presurvey_overview <- paste0(datasetfolder_path,"vjcortesa_Presurvey_questions overview.xlsx")
presurvey_settings_240924 <- read_excel(presurvey_overview, sheet = "dataset_240924")
# Set paths to datasets
presurvey_overview <- paste0(datasetfolder_path,"vjcortesa_Presurvey_questions overview.xlsx")
presurvey_settings_240924 <- read_excel(presurvey_overview, sheet = "dataset_240924")
presurvey_path_240924 <- paste0(datasetfolder_path,"housinggame_session_16_240924_surveys/241108_240924_WhereWeMove sessions - presurvey.xlsx")
# Set paths to datasets
presurvey_overview <- paste0(datasetfolder_path,"vjcortesa_Presurvey_questions overview.xlsx")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/GS4_vjcortesa_How is risk perception assessed_risk profiles.R")
# Step 1: Data Settings ------------------------------------------------------------------
# Install, load, set the necessary packages, directories and functions
library(readxl)
# Load if using RStudio (interactive session)
library(rstudioapi)
# Managing datasets
library(dplyr)
# Load for excel manipulation
library(writexl)
# Get the path of the current script (works in RStudio)
# e.g. "~/R data analysis BEPs/Scripts_vjcortesa/functions/vjcortesa_RiskPerception_DataSettings.R"
script_path <- rstudioapi::getActiveDocumentContext()$path
# e.g. "~/R data analysis BEPs/Scripts_vjcortesa/functions/"
scriptfolder_path <- dirname(script_path)
print(scriptfolder_path)
# Set path to shared folder with the rawdata two directories up
datasetfolder_path <- paste0(dirname(scriptfolder_path),"/Datasets/")
print(datasetfolder_path)
# Allow to set and check working space for the github collaborator coding
setwd(scriptfolder_path)
getwd()
# Load required functions
source(file.path(scriptfolder_path, "functions", "vjcortesa_RiskPerception_DS_function.R"))
# Set paths to datasets
presurvey_overview <- paste0(datasetfolder_path,"vjcortesa_Presurvey_questions overview.xlsx")
presurvey_settings_240924 <- read_excel(presurvey_overview, sheet = "dataset_240924")
presurvey_path_240924 <- paste0(datasetfolder_path,"housinggame_session_16_240924_surveys/241108_240924_WhereWeMove sessions - presurvey.xlsx")
df = riskperception_ds(presurvey_overview, presurvey_path_240924,"240924")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/GS4_vjcortesa_How is risk perception assessed_risk profiles.R")
print(presurvey_path_240924)
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/GS4_vjcortesa_How is risk perception assessed_risk profiles.R")
df = riskperception_ds(presurvey_overview, presurvey_path_240924,"240924")
df = riskperception_ds(presurvey_overview, presurvey_path_240924,"240924")
# Initialize an empty data frame to collect metadata
question_metadata <- data.frame(
uid = integer(),
DataAnalysisQuestion = character(),
QuestionAlias = character(),
QuestionText = character(),
QuestionColumn = integer(),
AnswerOptions = character(),
stringsAsFactors = FALSE
)
# Step 1: Read the full sheet including metadata
raw_data <- read_excel(presurvey_path, col_names = FALSE)
# Step 2: Extract the actual headers from row 2
real_headers <- as.character(unlist(raw_data[2, ]))
# Step 3: Read the data again, skipping metadata rows (e.g., first 2 rows)
presurvey_data <- read_excel(presurvey_path, skip = 3, col_names = FALSE)
# Step 4: Assign the real headers
colnames(presurvey_data) <- real_headers
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/GS4_vjcortesa_How is risk perception assessed_risk profiles.R")
# Step 1: Data Settings ------------------------------------------------------------------
# Install, load, set the necessary packages, directories and functions
library(readxl)
# Load if using RStudio (interactive session)
library(rstudioapi)
# Managing datasets
library(dplyr)
# Load for excel manipulation
library(writexl)
# Get the path of the current script (works in RStudio)
# e.g. "~/R data analysis BEPs/Scripts_vjcortesa/functions/vjcortesa_RiskPerception_DataSettings.R"
script_path <- rstudioapi::getActiveDocumentContext()$path
# e.g. "~/R data analysis BEPs/Scripts_vjcortesa/functions/"
scriptfolder_path <- dirname(script_path)
print(scriptfolder_path)
# Set path to shared folder with the rawdata two directories up
datasetfolder_path <- paste0(dirname(scriptfolder_path),"/Datasets/")
print(datasetfolder_path)
# Allow to set and check working space for the github collaborator coding
setwd(scriptfolder_path)
getwd()
# Load required functions
##source(file.path(scriptfolder_path, "functions", "vjcortesa_RiskPerception_DS_function.R"))
# Set paths to datasets
presurvey_overview <- paste0(datasetfolder_path,"vjcortesa_Presurvey_questions overview.xlsx")
presurvey_settings_240924 <- read_excel(presurvey_overview, sheet = "dataset_240924")
presurvey_path_240924 <- paste0(datasetfolder_path,"housinggame_session_16_240924_surveys/241108_240924_WhereWeMove sessions - presurvey.xlsx")
print(presurvey_path_240924)
riskperception_ds <- function(presurvey_overview_file = "local path", dataset_path = "housinggame_session_16_240924_surveys\241108_240924_WhereWeMove sessions - presurvey.xlsx", output_suffix = "240924") {
# Step 1: Read the full sheet including metadata
raw_data <- read_excel(presurvey_path, col_names = FALSE)
# Step 2: Extract the actual headers from row 2
real_headers <- as.character(unlist(raw_data[2, ]))
# Step 3: Read the data again, skipping metadata rows (e.g., first 2 rows)
presurvey_data <- read_excel(presurvey_path, skip = 3, col_names = FALSE)
# Step 4: Assign the real headers
colnames(presurvey_data) <- real_headers
presurvey_settings_rp <- presurvey_settings %>%
filter(!is.na(DataAnalysisQuestion) & DataAnalysisQuestion != 0)
# Not to clutter the R environment with many variables, the resutlts for all questions are on a named list
rp_settings <- list()
# Initialize an empty data frame to collect metadata
question_metadata <- data.frame(
uid = integer(),
DataAnalysisQuestion = character(),
QuestionAlias = character(),
QuestionText = character(),
QuestionColumn = integer(),
AnswerOptions = character(),
stringsAsFactors = FALSE
)
}
# Step 1: Data Settings ------------------------------------------------------------------
# Install, load, set the necessary packages, directories and functions
library(readxl)
# Load if using RStudio (interactive session)
library(rstudioapi)
# Managing datasets
library(dplyr)
# Load for excel manipulation
library(writexl)
# Get the path of the current script (works in RStudio)
# e.g. "~/R data analysis BEPs/Scripts_vjcortesa/functions/vjcortesa_RiskPerception_DataSettings.R"
script_path <- rstudioapi::getActiveDocumentContext()$path
# e.g. "~/R data analysis BEPs/Scripts_vjcortesa/functions/"
scriptfolder_path <- dirname(script_path)
print(scriptfolder_path)
# Set path to shared folder with the rawdata two directories up
datasetfolder_path <- paste0(dirname(scriptfolder_path),"/Datasets/")
print(datasetfolder_path)
# Allow to set and check working space for the github collaborator coding
setwd(scriptfolder_path)
getwd()
# Load required functions
##source(file.path(scriptfolder_path, "functions", "vjcortesa_RiskPerception_DS_function.R"))
# Set paths to datasets
presurvey_overview <- paste0(datasetfolder_path,"vjcortesa_Presurvey_questions overview.xlsx")
presurvey_settings_240924 <- read_excel(presurvey_overview, sheet = "dataset_240924")
presurvey_path_240924 <- paste0(datasetfolder_path,"housinggame_session_16_240924_surveys/241108_240924_WhereWeMove sessions - presurvey.xlsx")
print(presurvey_path_240924)
riskperception_ds <- function(presurvey_overview_file = "local path", dataset_path = "housinggame_session_16_240924_surveys\241108_240924_WhereWeMove sessions - presurvey.xlsx", output_suffix = "240924") {
# Step 1: Read the full sheet including metadata
raw_data <- read_excel(presurvey_path, col_names = FALSE)
# Step 2: Extract the actual headers from row 2
real_headers <- as.character(unlist(raw_data[2, ]))
# Step 3: Read the data again, skipping metadata rows (e.g., first 2 rows)
presurvey_data <- read_excel(presurvey_path, skip = 3, col_names = FALSE)
# Step 4: Assign the real headers
colnames(presurvey_data) <- real_headers
presurvey_settings_rp <- presurvey_settings %>%
filter(!is.na(DataAnalysisQuestion) & DataAnalysisQuestion != 0)
# Not to clutter the R environment with many variables, the resutlts for all questions are on a named list
rp_settings <- list()
# Initialize an empty data frame to collect metadata
question_metadata <- data.frame(
uid = integer(),
DataAnalysisQuestion = character(),
QuestionAlias = character(),
QuestionText = character(),
QuestionColumn = integer(),
AnswerOptions = character(),
stringsAsFactors = FALSE
)
}
df = riskperception_ds(presurvey_overview, presurvey_path_240924,"240924")
df = riskperception_ds(presurvey_overview, presurvey_path_240924,"240924")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/GS4_vjcortesa_How is risk perception assessed_risk profiles.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/GS4_vjcortesa_How is risk perception assessed_risk profiles.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/GS4_vjcortesa_How is risk perception assessed_risk profiles.R")
df = riskperception_ds(presurvey_overview, presurvey_path_240924,"240924")
df = riskperception_ds(presurvey_overview, presurvey_path_240924,"240924")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/GS4_vjcortesa_How is risk perception assessed_risk profiles.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/GS4_vjcortesa_How is risk perception assessed_risk profiles.R")
# Step 1: Data Settings ------------------------------------------------------------------
# Install, load, set the necessary packages, directories and functions
library(readxl)
# Load if using RStudio (interactive session)
library(rstudioapi)
# Managing datasets
library(dplyr)
# Load for excel manipulation
library(writexl)
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/GS4_vjcortesa_How is risk perception assessed_risk profiles.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/GS4_vjcortesa_How is risk perception assessed_risk profiles.R")
View(df)
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/GS4_vjcortesa_How is risk perception assessed_risk profiles.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/GS4_vjcortesa_How is risk perception assessed_risk profiles.R")
View(df)
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/GS4_vjcortesa_How is risk perception assessed_risk profiles.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/GS4_vjcortesa_How is risk perception assessed_risk profiles.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/GS4_vjcortesa_How is risk perception assessed_risk profiles.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/GS4_vjcortesa_How is risk perception assessed_risk profiles.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/GS4_vjcortesa_How is risk perception assessed_risk profiles.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/GS4_vjcortesa_How is risk perception assessed_risk profiles.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/GS4_vjcortesa_How is risk perception assessed_risk profiles.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/GS4_vjcortesa_How is risk perception assessed_risk profiles.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/GS4_vjcortesa_How is risk perception assessed_risk profiles.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/GS4_vjcortesa_How is risk perception assessed_risk profiles.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/GS4_vjcortesa_How is risk perception assessed_risk profiles.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/functions/vjcortesa_RiskPerception_DS_function.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/functions/vjcortesa_RiskPerception_DS_function.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/GS4_vjcortesa_How is risk perception assessed_risk profiles.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/GS4_vjcortesa_How is risk perception assessed_risk profiles.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/GS4_vjcortesa_How is risk perception assessed_risk profiles.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/GS4_vjcortesa_How is risk perception assessed_risk profiles.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/GS4_vjcortesa_How is risk perception assessed_risk profiles.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/GS4_vjcortesa_How is risk perception assessed_risk profiles.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/GS4_vjcortesa_How is risk perception assessed_risk profiles.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/GS4_vjcortesa_How is risk perception assessed_risk profiles.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/GS4_vjcortesa_How is risk perception assessed_risk profiles.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/GS4_vjcortesa_How is risk perception assessed_risk profiles.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/GS4_vjcortesa_How is risk perception assessed_risk profiles.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/GS4_vjcortesa_How is risk perception assessed_risk profiles.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/GS4_vjcortesa_How is risk perception assessed_risk profiles.R")
source("~/TUDelft/18_Game Data Analysis/R data analysis BEPs/Scripts_vjcortesa/GS4_vjcortesa_How is risk perception assessed_risk profiles.R")
